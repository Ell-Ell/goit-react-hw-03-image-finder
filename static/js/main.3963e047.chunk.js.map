{"version":3,"sources":["components/Searchbar/Searchbar.module.css","components/Modal/Modal.module.css","components/ImageGallery/ImageGalleryItem/ImageGalleryItem.module.css","components/ImageGallery/ImageGallery.module.css","components/Button/Button.module.css","components/Loader/Loader.module.css","components/Modal/Modal.js","components/Searchbar/Searchbar.js","components/ImageGallery/ImageGallery.js","components/ImageGallery/ImageGalleryItem/ImageGalleryItem.js","components/Button/Button.js","components/ErrorMessage/ErrorMessage.js","components/Loader/Loader.js","services/api-service.js","App.js","index.js"],"names":["module","exports","modalRoot","document","querySelector","Modal","handleKeyDown","e","code","props","openModal","handleBackdropClick","target","currentTarget","window","addEventListener","this","removeEventListener","createPortal","className","s","Overlay","onClick","src","largeImg","alt","Component","SearchBar","state","query","handleChange","setState","value","toLowerCase","handleSubmit","preventDefault","trim","onSubmit","toast","error","Searchbar","SearchForm","type","SearchFormButton","SearchFormButtonLabel","SearchFormInput","onChange","placeholder","ImageGallery","children","ImageGalleryItem","images","map","id","webformatURL","tags","ImageGalleryItemImage","Button","ShowErrorMessage","message","LoaderApp","LoaderContainer","color","height","width","timeout","axios","defaults","baseURL","params","key","image_type","orientation","per_page","fetchImage","a","searchQuery","page","get","q","then","response","data","hits","Status","App","status","showModal","imagesEnded","imagesNotFiended","toggleModal","event","nodeName","targetImg","find","Number","largeImageURL","handleSearchbarSubmit","fetchImages","length","prevState","catch","finally","windowScroll","prevProps","scrollTo","top","documentElement","scrollHeight","behavior","autoClose","Loader","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.3963e047.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__2FpDx\",\"SearchForm\":\"Searchbar_SearchForm__1O91N\",\"SearchFormButton\":\"Searchbar_SearchFormButton__3VPZu\",\"SearchFormButtonLabel\":\"Searchbar_SearchFormButtonLabel__23CCJ\",\"SearchFormInput\":\"Searchbar_SearchFormInput__2W0TW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__2reBt\",\"Modal\":\"Modal_Modal__2wxRT\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__2WB83\",\"ImageGalleryItemImage\":\"ImageGalleryItem_ImageGalleryItemImage__1UdDD\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__3ixqg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__2fXdf\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"LoaderContainer\":\"Loader_LoaderContainer__20djP\"};","import { Component } from 'react';\nimport { createPortal } from 'react-dom';\n\nimport s from './Modal.module.css';\n\nconst modalRoot = document.querySelector('#modal-root');\n\nclass Modal extends Component {\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleKeyDown);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeyDown);\n  }\n\n  handleKeyDown = e => {\n    if (e.code === 'Escape') {\n      this.props.openModal();\n    }\n  };\n\n  handleBackdropClick = e => {\n    if (e.target === e.currentTarget) {\n      this.props.openModal();\n    }\n  };\n\n  render() {\n    return createPortal(\n      <div className={s.Overlay} onClick={this.handleBackdropClick}>\n        <div className={s.Modal}>\n          <img src={this.props.largeImg} alt=\"\" />\n        </div>\n      </div>,\n      modalRoot,\n    );\n  }\n}\n\nexport default Modal;\n","import { Component } from 'react';\nimport { toast } from 'react-toastify';\n\nimport 'react-toastify/dist/ReactToastify.css';\nimport s from './Searchbar.module.css';\n\nclass SearchBar extends Component {\n  state = {\n    query: '',\n  };\n\n  handleChange = e => {\n    this.setState({\n      query: e.currentTarget.value.toLowerCase(),\n    });\n  };\n\n  handleSubmit = e => {\n    e.preventDefault();\n    const { query } = this.state;\n\n    if (query.trim() === '') {\n      toast.error('Please, type the query');\n      return;\n    }\n\n    this.props.onSubmit(query);\n    this.setState({\n      query: '',\n    });\n  };\n\n  render() {\n    return (\n      <header className={s.Searchbar}>\n        <form className={s.SearchForm} onSubmit={this.handleSubmit}>\n          <button type=\"submit\" className={s.SearchFormButton}>\n            <span className={s.SearchFormButtonLabel}>Search</span>\n          </button>\n\n          <input\n            className={s.SearchFormInput}\n            type=\"text\"\n            value={this.state.query}\n            onChange={this.handleChange}\n            placeholder=\"Search img and photos\"\n          />\n        </form>\n      </header>\n    );\n  }\n}\n\nexport default SearchBar;\n","import React from 'react';\nimport s from './ImageGallery.module.css';\n\nconst ImageGallery = ({ children, onClick }) => {\n  return (\n    <ul className={s.ImageGallery} onClick={onClick}>\n      {children}\n    </ul>\n  );\n};\n\nexport default ImageGallery;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport s from './ImageGalleryItem.module.css';\n\nconst ImageGalleryItem = ({ images }) => {\n  return images.map(({ id, webformatURL, tags }) => (\n    <li key={id} className={s.ImageGalleryItem}>\n      <img\n        src={webformatURL}\n        alt={tags}\n        className={s.ImageGalleryItemImage}\n        id={id}\n      />\n    </li>\n  ));\n};\n\nImageGalleryItem.propTypes = {\n  images: PropTypes.arrayOf(\n    PropTypes.shape({\n      id: PropTypes.number.isRequired,\n      webformatURL: PropTypes.string.isRequired,\n      tags: PropTypes.string.isRequired,\n    }),\n  ),\n};\n\nexport default ImageGalleryItem;\n","import PropTypes from 'prop-types';\nimport s from './Button.module.css';\n\nconst Button = ({ onClick }) => {\n  return (\n    <button type=\"button\" className={s.Button} onClick={onClick}>\n      Load more\n    </button>\n  );\n};\n\nexport default Button;\n\nButton.propTypes = {\n  onClick: PropTypes.func.isRequired,\n};\n","export default function ShowErrorMessage({ message }) {\n  return <h1>{message}</h1>;\n}\n","import Loader from 'react-loader-spinner';\nimport { Component } from 'react';\nimport s from './Loader.module.css';\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\n\nclass LoaderApp extends Component {\n  render() {\n    return (\n      <div className={s.LoaderContainer}>\n        <Loader\n          type=\"Puff\"\n          color=\"#00BFFF\"\n          height={100}\n          width={100}\n          timeout={3000}\n        />\n      </div>\n    );\n  }\n}\n\nexport default LoaderApp;\n","import axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '22940348-1b20cc5115637f53696a8a841';\n\naxios.defaults.baseURL = BASE_URL;\naxios.defaults.params = {\n  key: API_KEY,\n  image_type: 'photo',\n  orientation: 'horizontal',\n  per_page: 12,\n};\n\nconst fetchImage = async ({ searchQuery, page }) => {\n  return await axios\n    .get('', {\n      params: {\n        q: searchQuery,\n        page: page,\n      },\n    })\n    .then(response => response.data.hits);\n};\n\nexport default fetchImage;\n","import Modal from './components/Modal';\nimport SearchBar from './components/Searchbar/Searchbar';\nimport ImageGallery from './components/ImageGallery';\nimport ImageGalleryItem from './components/ImageGallery/ImageGalleryItem';\nimport Button from './components/Button';\nimport ShowErrorMessage from './components/ErrorMessage';\nimport Loader from './components/Loader';\nimport fetchImage from './services/api-service';\n\nimport { Component } from 'react';\nimport { ToastContainer, toast } from 'react-toastify';\n\nimport './App.css';\n\nconst Status = {\n  IDLE: 'idle',\n  PENDING: 'pending',\n  RESOLVED: 'resolved',\n  REJECTED: 'rejected',\n};\n\nclass App extends Component {\n  state = {\n    images: [],\n    searchQuery: '',\n    page: 1,\n    status: Status.IDLE,\n    error: null,\n    largeImg: '',\n    showModal: false,\n    imagesEnded: false,\n    imagesNotFiended: false,\n  };\n\n  //if запись стейта и get\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState.searchQuery !== this.state.searchQuery) {\n      this.fetchImages();\n    }\n  }\n\n  windowScroll() {\n    window.scrollTo({\n      top: document.documentElement.scrollHeight,\n      behavior: 'smooth',\n    });\n  }\n\n  toggleModal = () => {\n    this.setState(({ showModal }) => ({\n      showModal: !showModal,\n    }));\n  };\n\n  openModal = event => {\n    if (event.target.nodeName === 'IMG') {\n      this.toggleModal();\n    }\n    const targetImg = this.state.images.find(\n      ({ id }) => id === Number(event.target.id),\n    );\n    this.setState({ largeImg: targetImg.largeImageURL });\n  };\n\n  //запись в стейт\n  handleSearchbarSubmit = query => {\n    this.setState({ searchQuery: query, page: 1, images: [], error: null });\n  };\n\n  fetchImages = () => {\n    const { page, searchQuery } = this.state;\n    // объект настроек (если более двух)\n    const options = { searchQuery, page };\n\n    fetchImage(options)\n      .then(images => {\n        if (images.length === 0) {\n          this.setState(() => ({\n            imagesEnded: true,\n            imagesNotFiended: this.state.images.length === 0,\n          }));\n        } else {\n          this.setState(prevState => ({\n            images: [...prevState.images, ...images],\n            page: prevState.page + 1,\n            imagesEnded: false,\n            imagesNotFiended: false,\n          }));\n          this.setState({ status: Status.PENDING });\n        }\n      })\n      .catch(error => {\n        this.setState({ error, status: Status.REJECTED });\n        toast.error('Sorry, try again');\n      })\n      .finally(() => {\n        this.setState({ status: Status.RESOLVED }, () => this.windowScroll());\n      });\n  };\n\n  render() {\n    const { images, status, showModal, largeImg } = this.state;\n\n    if (status === Status.IDLE) {\n      return (\n        <>\n          <SearchBar onSubmit={this.handleSearchbarSubmit}></SearchBar>;\n          <ToastContainer autoClose={3000} />\n        </>\n      );\n    }\n\n    if (status === Status.PENDING) {\n      return (\n        <>\n          <SearchBar onSubmit={this.handleSearchbarSubmit}></SearchBar>;\n          <Loader />\n        </>\n      );\n    }\n\n    if (status === Status.REJECTED) {\n      return <ShowErrorMessage message=\"Please, try again\" />;\n    }\n\n    if (status === Status.RESOLVED) {\n      return (\n        <>\n          <div className=\"App\">\n            <SearchBar onSubmit={this.handleSearchbarSubmit}></SearchBar>\n\n            {this.state.imagesNotFiended ? (\n              <ShowErrorMessage message=\"Images not founded. Please, try again\" />\n            ) : null}\n\n            <ImageGallery onClick={this.openModal}>\n              <ImageGalleryItem images={images} />\n            </ImageGallery>\n\n            {!this.state.imagesEnded && (\n              <Button onClick={this.fetchImages}></Button>\n            )}\n            {showModal && (\n              <Modal largeImg={largeImg} openModal={this.toggleModal} />\n            )}\n\n            <ToastContainer autoClose={3000} />\n          </div>\n        </>\n      );\n    }\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}